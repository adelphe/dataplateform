{
  "dashboard_title": "Customer Insights",
  "description": "Analytics dashboard for customer behavior, lifetime value, and segmentation",
  "slug": "customer-insights",
  "position_json": {
    "DASHBOARD_VERSION_KEY": "v2",
    "ROOT_ID": {
      "type": "ROOT",
      "id": "ROOT_ID",
      "children": ["GRID_ID"]
    },
    "GRID_ID": {
      "type": "GRID",
      "id": "GRID_ID",
      "children": ["ROW-1", "ROW-2"],
      "parents": ["ROOT_ID"]
    },
    "ROW-1": {
      "type": "ROW",
      "id": "ROW-1",
      "children": ["CHART-KPI-1", "CHART-KPI-2"],
      "meta": {
        "background": "BACKGROUND_TRANSPARENT"
      }
    },
    "ROW-2": {
      "type": "ROW",
      "id": "ROW-2",
      "children": ["CHART-BAR-1", "CHART-HIST-1"],
      "meta": {
        "background": "BACKGROUND_TRANSPARENT"
      }
    },
    "CHART-KPI-1": {
      "type": "CHART",
      "id": "CHART-KPI-1",
      "meta": {
        "width": 4,
        "height": 30,
        "chartId": null,
        "sliceName": "Total Customers KPI"
      }
    },
    "CHART-KPI-2": {
      "type": "CHART",
      "id": "CHART-KPI-2",
      "meta": {
        "width": 4,
        "height": 30,
        "chartId": null,
        "sliceName": "Average Transaction Value KPI"
      }
    },
    "CHART-BAR-1": {
      "type": "CHART",
      "id": "CHART-BAR-1",
      "meta": {
        "width": 6,
        "height": 50,
        "chartId": null,
        "sliceName": "Top Customers by Total Spend"
      }
    },
    "CHART-HIST-1": {
      "type": "CHART",
      "id": "CHART-HIST-1",
      "meta": {
        "width": 6,
        "height": 50,
        "chartId": null,
        "sliceName": "Customer Lifetime Distribution"
      }
    }
  },
  "metadata": {
    "color_scheme": "supersetColors",
    "refresh_frequency": 0,
    "expanded_slices": {},
    "label_colors": {},
    "shared_label_colors": {},
    "cross_filters_enabled": true,
    "native_filter_configuration": []
  },
  "charts": [
    {
      "slice_name": "Total Customers KPI",
      "viz_type": "big_number_total",
      "datasource": "mart_customer_analytics",
      "params": {
        "viz_type": "big_number_total",
        "metric": {
          "label": "total_customers",
          "expressionType": "SQL",
          "sqlExpression": "COUNT(DISTINCT customer_id)"
        },
        "subheader": "Total Unique Customers",
        "y_axis_format": ",d",
        "header_font_size": 0.4,
        "subheader_font_size": 0.15
      }
    },
    {
      "slice_name": "Average Transaction Value KPI",
      "viz_type": "big_number_total",
      "datasource": "mart_customer_analytics",
      "params": {
        "viz_type": "big_number_total",
        "metric": {
          "label": "avg_order_value",
          "expressionType": "SQL",
          "sqlExpression": "AVG(avg_order_value)"
        },
        "subheader": "Avg Order Value",
        "y_axis_format": "$,.2f",
        "header_font_size": 0.4,
        "subheader_font_size": 0.15
      }
    },
    {
      "slice_name": "Top Customers by Total Spend",
      "viz_type": "echarts_bar",
      "datasource": "mart_customer_analytics",
      "params": {
        "viz_type": "echarts_bar",
        "x_axis": "customer_name",
        "metrics": [
          {
            "label": "total_spend",
            "expressionType": "SQL",
            "sqlExpression": "SUM(total_spend)"
          }
        ],
        "groupby": ["customer_name"],
        "row_limit": 10,
        "order_desc": true,
        "color_scheme": "supersetColors",
        "show_legend": false,
        "x_axis_title": "Customer",
        "y_axis_title": "Total Spend ($)",
        "orientation": "vertical"
      }
    },
    {
      "slice_name": "Customer Lifetime Distribution",
      "viz_type": "echarts_histogram",
      "datasource": "mart_customer_analytics",
      "params": {
        "viz_type": "echarts_histogram",
        "all_columns_x": ["customer_lifetime_days"],
        "row_limit": 1000,
        "color_scheme": "supersetColors",
        "x_axis_title": "Customer Lifetime (Days)",
        "y_axis_title": "Number of Customers",
        "bins": 20
      }
    }
  ],
  "dataset": {
    "table_name": "mart_customer_analytics",
    "schema": "marts",
    "database": "postgres_warehouse",
    "description": "Customer analytics mart with lifetime value, purchase patterns, and segmentation",
    "columns": [
      {"column_name": "customer_id", "type": "INTEGER", "is_dttm": false, "description": "Unique customer identifier"},
      {"column_name": "customer_name", "type": "VARCHAR", "is_dttm": false, "description": "Customer full name"},
      {"column_name": "email", "type": "VARCHAR", "is_dttm": false, "description": "Customer email address"},
      {"column_name": "total_orders", "type": "INTEGER", "is_dttm": false, "description": "Total number of orders placed"},
      {"column_name": "total_spend", "type": "NUMERIC", "is_dttm": false, "description": "Total amount spent by customer"},
      {"column_name": "avg_order_value", "type": "NUMERIC", "is_dttm": false, "description": "Average value per order"},
      {"column_name": "first_order_date", "type": "DATE", "is_dttm": true, "description": "Date of first order"},
      {"column_name": "last_order_date", "type": "DATE", "is_dttm": true, "description": "Date of most recent order"},
      {"column_name": "customer_lifetime_days", "type": "INTEGER", "is_dttm": false, "description": "Days between first and last order"}
    ],
    "metrics": [
      {"metric_name": "total_customers", "expression": "COUNT(DISTINCT customer_id)", "description": "Count of unique customers"},
      {"metric_name": "sum_total_spend", "expression": "SUM(total_spend)", "description": "Sum of all customer spending"},
      {"metric_name": "avg_customer_spend", "expression": "AVG(total_spend)", "description": "Average spending per customer"},
      {"metric_name": "avg_order_value", "expression": "AVG(avg_order_value)", "description": "Average order value across customers"}
    ]
  }
}
